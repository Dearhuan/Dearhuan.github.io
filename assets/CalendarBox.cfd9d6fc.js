import{_ as Y,i as O,f as _,q as E,o as d,c as r,t as u,k as N,a as l,F as x,g as w,z as U}from"./app.71dd3a16.js";const z={class:"container"},A={key:0,class:"title"},L={class:"year flex-box"},V={class:"months"},j={class:"top flex-box"},q={class:"text"},S={class:"sub-text"},G={class:"bottom flex-box"},H={class:"text"},J={class:"sub-text"},K={class:"sub-total flex-box"},Q={class:"sub-item blue"},T={class:"sub-item green"},W={class:"sub-item orange"},X={class:"tooltips flex-box"},Z=O({__name:"CalendarBox",props:{title:{default:""},money:{default:9999},startDate:{default:"2000-05-20"},endDate:{default:"2099-05-20"}},setup(D){const s=D,y=_([]),F=_(0),p=_(0),M=_(0),I=["01","02","03","04","05","06"],B=["07","09","09","10","11","12"],b=_([{color:"blue",name:"total",text:"\u603B\u8BA1"},{color:"gray",name:"other",text:"\u5176\u4ED6"},{color:"green",name:"paid",text:"\u5DF2\u8FD8"},{color:"orange",name:"unpaid",text:"\u5F85\u8FD8"}]),R=()=>{const t=new Date,h=new Date(s.startDate).getFullYear(),a=new Date(s.endDate).getFullYear(),$=new Date(s.startDate).getMonth()+1,o=new Date(s.startDate).getDate(),n=a-h+1,c=[];for(let f=0;f<n;f++){const e=h+f,k=I.map(m=>{const i=Number(m);let v=!1,g=!1;return(new Date(`${e}-${i}-${t.getDate()}`)<new Date(s.startDate)||new Date(`${e}-${i}-${t.getDate()}`)>new Date(s.endDate))&&(v=!0),new Date(`${e}-${i}-${t.getDate()}`)>new Date(s.startDate)&&new Date(`${e}-${i}-${t.getDate()}`)<new Date(s.endDate)&&(g=!0),new Date(`${e}-${i}-${t.getDate()}`).getMonth()>new Date(`${h}-${$-1}-${o}`).getMonth()&&new Date(`${e}-${i+1}-${t.getDate()}`)<t&&(g=!0,v=!0),{month:m,isUnRelated:v,isUnFinished:g}}),C=B.map(m=>{const i=Number(m);let v=!1,g=!1;return(new Date(`${e}-${i}-${t.getDate()}`)<new Date(s.startDate)||new Date(`${e}-${i}-${t.getDate()}`)>new Date(s.endDate))&&(v=!0),new Date(`${e}-${i}-${t.getDate()}`)>new Date(s.startDate)&&new Date(`${e}-${i}-${t.getDate()}`)<new Date(s.endDate)&&(g=!0),new Date(`${e}-${i}-${t.getDate()}`).getMonth()>new Date(`${h}-${$-1}-${o}`).getMonth()&&new Date(`${e}-${i+1}-${t.getDate()}`)<t&&(g=!0,v=!0),{month:m,isUnRelated:v,isUnFinished:g}}),P={year:e,topOption:k,bottomOption:C,paidItem:0,unPaidItem:0};c.push(P)}return c};return E(()=>{y.value=R();let t=0;y.value.forEach(n=>{let c=0,f=0;n.topOption.forEach(e=>{e.isUnFinished&&e.isUnRelated&&(t++,c++),e.isUnFinished&&!e.isUnRelated&&f++}),n.bottomOption.forEach(e=>{e.isUnFinished&&e.isUnRelated&&(t++,c++),e.isUnFinished&&!e.isUnRelated&&f++}),n.paidItem=c,n.unPaidItem=f}),p.value=t*s.money;const h=new Date(s.startDate),a=new Date(s.endDate),o=(a.getFullYear()-h.getFullYear())*12+a.getMonth()-h.getMonth();F.value=o*s.money,M.value=F.value-p.value,b.value=b.value.map(n=>{const c=n.name==="total"?F.value:n.name==="other"?null:n.name==="paid"?p.value:n.name==="unpaid"?M.value:null;return{color:n.color,name:n.name,text:`${n.text}${c?`(${c})`:""}`}})}),(t,h)=>(d(),r("div",z,[D.title?(d(),r("div",A,u(D.title),1)):N("",!0),l("div",null,[(d(!0),r(x,null,w(y.value,(a,$)=>(d(),r("div",{class:"year-box flex-box",key:$},[l("div",L,u(a.year),1),l("div",V,[l("div",j,[(d(!0),r(x,null,w(a.topOption,(o,n)=>(d(),r("div",{class:U(["month",o.isUnRelated&&!o.isUnFinished?"gray":!o.isUnRelated&&o.isUnFinished?"orange":"green"]),key:n},[l("div",q,u(o.month),1),l("div",S,u(D.money),1)],2))),128))]),l("div",G,[(d(!0),r(x,null,w(a.bottomOption,(o,n)=>(d(),r("div",{class:U(["month",o.isUnRelated&&!o.isUnFinished?"gray":!o.isUnRelated&&o.isUnFinished?"orange":"green"]),key:n},[l("div",H,u(o.month),1),l("div",J,u(D.money),1)],2))),128))])]),l("div",K,[l("div",Q,u(`\u603B\u8BA1${a.paidItem+a.unPaidItem}\u671F:${(a.paidItem+a.unPaidItem)*D.money}`),1),l("div",T,u(`\u5DF2\u8FD8${a.paidItem}\u671F:${a.paidItem*D.money}`),1),l("div",W,u(`\u5F85\u8FD8${a.unPaidItem}\u671F:${a.unPaidItem*D.money}`),1)])]))),128))]),l("div",X,[(d(!0),r(x,null,w(b.value,(a,$)=>(d(),r("div",{class:"tooltip",key:$},[l("div",{class:U(["color-block",a.color])},u(a.text),3)]))),128))])]))}});var te=Y(Z,[["__scopeId","data-v-0599c6d6"],["__file","CalendarBox.vue"]]);export{te as default};
