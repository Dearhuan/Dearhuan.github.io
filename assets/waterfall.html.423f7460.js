import{_ as H,f as p,i as M,v as $,o as B,c as T,a as D}from"./app.bce6a2c0.js";const b=D("div",{id:"waterfall",class:"waterfall"},null,-1),L=[b],N={__name:"waterfall.html",setup(W){const g=p(0),v=p(10),d=p(!1),f=(t,e)=>parseInt(Math.random()*(e-t+1)+t),w=t=>{var e=f(0,255),o=f(0,255),n=f(0,255);return t?`rgba(${e},${o},${n},${Math.random().toFixed(2)*1})`:`rgba(${e},${o},${n})`},y=(t=5,e=1)=>(Math.floor(Math.random()*(t-e+1))+e)*100,x=t=>{let e=0,o=t[e];for(let n=1;n<t.length;n++)t[n]<o&&(o=t[n],e=n);return e},E=t=>{let e=t[0];for(let o=1;o<t.length;o++)t[o]>e&&(e=t[o]);return e},h=(t,e,o=!1,n)=>{let l=null,s=!1;function a(...i){if(l&&clearTimeout(l),o&&!s){const c=t.apply(this,i);n&&typeof n=="function"&&n(c),s=!0}else l=setTimeout(()=>{const c=t.apply(this,i);n&&typeof n=="function"&&n(c),s=!1,l=null},e)}return a.cancel=function(){l&&clearTimeout(l),l=null,s=!1},a},_=(t=5)=>{const e=document.getElementById("waterfall");return new Promise((o,n)=>{setTimeout(()=>{const l=document.createDocumentFragment();for(let s=0;s<t;s++){const a=document.createElement("div"),i=document.createElement("div");a.className="waterfall-item animate__animated animate__slideInUp",i.className="num",i.textContent=g.value+1,g.value++,a.appendChild(i),a.style.height=y(4,1)+"px",a.style.background=w(),a.style.transitionDelay=`${s/5}s`,l.appendChild(a)}e.appendChild(l),o()},10)})},r=()=>{const t=document.getElementById("waterfall"),e=t.children||[],o=v.value;let n=[],l=0;if(e.length===0)return;const s=t.offsetWidth,a=e[0].offsetWidth,i=parseInt(s/(a+o));for(console.log(s,a,i);l<e.length;){let c,u;if(l<i)c=0,u=(a+o)*l,n.push(e[l].offsetHeight);else{const m=x(n);c=n[m]+o,u=e[m].offsetLeft,n[m]+=e[l].offsetHeight+o}t.style.height=E(n)+"px",e[l].style.top=c+"px",e[l].style.left=u+"px",l++}},I=async()=>{const t=document.documentElement.scrollTop,e=document.documentElement.clientHeight,o=document.body.scrollHeight;t+e>=o-200&&!d.value&&(d.value=!0,await _(),d.value=!1)};return M(async()=>{const t=document.getElementById("waterfall");await _(20),r(),window.addEventListener("resize",h(r,200,!0)),t.addEventListener("DOMSubtreeModified",()=>{r()}),window.onscroll=h(I,200,!0)}),$(()=>{window.removeEventListener("resize",r)}),(t,e)=>(B(),T("div",null,L))}};var z=H(N,[["__file","waterfall.html.vue"]]);export{z as default};
