import{_ as $,f as d,q as T,a3 as b,o as B,c as D}from"./app.7ed6b43f.js";const L=["id"],N={__name:"Waterfall",props:{gap:{type:Number,required:!0,default:10},container:{type:String,required:!0,default:""}},setup(x){const v=x,h=d(0),f=d(!1),w=d(v.gap),r=d(v.container),m=(t,e)=>parseInt(Math.random()*(e-t+1)+t),E=t=>{var e=m(0,255),o=m(0,255),n=m(0,255);return t?`rgba(${e},${o},${n},${Math.random().toFixed(2)*1})`:`rgba(${e},${o},${n})`},I=(t=5,e=1)=>(Math.floor(Math.random()*(t-e+1))+e)*100,H=t=>{let e=0,o=t[e];for(let n=1;n<t.length;n++)t[n]<o&&(o=t[n],e=n);return e},M=t=>{let e=t[0];for(let o=1;o<t.length;o++)t[o]>e&&(e=t[o]);return e},_=(t,e,o=!1,n)=>{let a=null,s=!1;function l(...i){if(a&&clearTimeout(a),o&&!s){const c=t.apply(this,i);n&&typeof n=="function"&&n(c),s=!0}else a=setTimeout(()=>{const c=t.apply(this,i);n&&typeof n=="function"&&n(c),s=!1,a=null},e)}return l.cancel=function(){a&&clearTimeout(a),a=null,s=!1},l},y=(t=5)=>{const e=document.getElementById(r.value);return new Promise((o,n)=>{setTimeout(()=>{const a=document.createDocumentFragment();for(let s=0;s<t;s++){const l=document.createElement("div"),i=document.createElement("div");l.className="waterfall-item animate__animated animate__slideInUp",i.className="num",i.textContent=h.value+1,h.value++,l.appendChild(i),l.style.height=I(4,1)+"px",l.style.background=E(),l.style.transitionDelay=`${s/5}s`,a.appendChild(l)}e.appendChild(a),o()},10)})},u=()=>{const t=document.getElementById(r.value),e=t.children||[],o=w.value;let n=[],a=0;if(e.length===0)return;const s=t.offsetWidth,l=e[0].offsetWidth,i=parseInt(s/(l+o));for(console.log(s,l,i);a<e.length;){let c,p;if(a<i)c=0,p=(l+o)*a,n.push(e[a].offsetHeight);else{const g=H(n);c=n[g]+o,p=e[g].offsetLeft,n[g]+=e[a].offsetHeight+o}t.style.height=M(n)+"px",e[a].style.top=c+"px",e[a].style.left=p+"px",a++}},W=async()=>{const t=document.documentElement.scrollTop,e=document.documentElement.clientHeight,o=document.body.scrollHeight;t+e>=o-200&&!f.value&&(f.value=!0,await y(),f.value=!1)};return T(async()=>{const t=document.getElementById(r.value);await y(20),u(),window.addEventListener("resize",_(u,200,!0)),t.addEventListener("DOMSubtreeModified",()=>{u()}),window.onscroll=_(W,200,!0)}),b(()=>{window.removeEventListener("resize",u)}),(t,e)=>(B(),D("div",{id:r.value,class:"waterfall"},null,8,L))}};var R=$(N,[["__file","Waterfall.vue"]]);export{R as default};
