import{_ as W,f as p,s as $,a3 as T,o as b,c as B}from"./app.6fce455b.js";const D={id:"waterfall",class:"waterfall"},L={__name:"Waterfall",props:{gap:{type:Number,required:!0,default:10}},setup(v){const y=v,g=p(0),d=p(!1),w=p(y.gap),f=(t,e)=>parseInt(Math.random()*(e-t+1)+t),x=t=>{var e=f(0,255),o=f(0,255),n=f(0,255);return t?`rgba(${e},${o},${n},${Math.random().toFixed(2)*1})`:`rgba(${e},${o},${n})`},E=(t=5,e=1)=>(Math.floor(Math.random()*(t-e+1))+e)*100,I=t=>{let e=0,o=t[e];for(let n=1;n<t.length;n++)t[n]<o&&(o=t[n],e=n);return e},H=t=>{let e=t[0];for(let o=1;o<t.length;o++)t[o]>e&&(e=t[o]);return e},h=(t,e,o=!1,n)=>{let l=null,s=!1;function a(...i){if(l&&clearTimeout(l),o&&!s){const r=t.apply(this,i);n&&typeof n=="function"&&n(r),s=!0}else l=setTimeout(()=>{const r=t.apply(this,i);n&&typeof n=="function"&&n(r),s=!1,l=null},e)}return a.cancel=function(){l&&clearTimeout(l),l=null,s=!1},a},_=(t=5)=>{const e=document.getElementById("waterfall");return new Promise((o,n)=>{setTimeout(()=>{const l=document.createDocumentFragment();for(let s=0;s<t;s++){const a=document.createElement("div"),i=document.createElement("div");a.className="waterfall-item animate__animated animate__slideInUp",i.className="num",i.textContent=g.value+1,g.value++,a.appendChild(i),a.style.height=E(4,1)+"px",a.style.background=x(),a.style.transitionDelay=`${s/5}s`,l.appendChild(a)}e.appendChild(l),o()},10)})},c=()=>{const t=document.getElementById("waterfall"),e=t.children||[],o=w.value;let n=[],l=0;if(e.length===0)return;const s=t.offsetWidth,a=e[0].offsetWidth,i=parseInt(s/(a+o));for(console.log(s,a,i);l<e.length;){let r,u;if(l<i)r=0,u=(a+o)*l,n.push(e[l].offsetHeight);else{const m=I(n);r=n[m]+o,u=e[m].offsetLeft,n[m]+=e[l].offsetHeight+o}t.style.height=H(n)+"px",e[l].style.top=r+"px",e[l].style.left=u+"px",l++}},M=async()=>{const t=document.documentElement.scrollTop,e=document.documentElement.clientHeight,o=document.body.scrollHeight;t+e>=o-200&&!d.value&&(d.value=!0,await _(),d.value=!1)};return $(async()=>{const t=document.getElementById("waterfall");await _(20),c(),window.addEventListener("resize",h(c,200,!0)),t.addEventListener("DOMSubtreeModified",()=>{c()}),window.onscroll=h(M,200,!0)}),T(()=>{window.removeEventListener("resize",c)}),(t,e)=>(b(),B("div",D))}};var R=W(L,[["__file","Waterfall.vue"]]);export{R as default};
