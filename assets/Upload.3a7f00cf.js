import{_ as I,f as R,g as m,w as S,o as f,c as p,F as $,j as T,b as M,r as U,a as s,V as b,W as C,z as j,ab as g,J as N,e as A,t as E,A as J,i as P,n as W,p as G,k as K}from"./app.a9d055f8.js";const h=u=>(G("data-v-70d3a9b7"),u=u(),K(),u),O={class:"m-upload-list"},Q={class:"m-upload"},X=["onDrop","onClick"],Y=["accept","multiple","onChange"],Z=h(()=>s("svg",{class:"u-plus",focusable:"false","data-icon":"plus","aria-hidden":"true",viewBox:"64 64 896 896"},[s("path",{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}),s("path",{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"})],-1)),ee={class:"u-tip"},ae={class:"m-file-uploading"},te={key:0,class:"m-file-preview"},le=["src","alt"],oe={key:1,class:"u-file",focusable:"false","data-icon":"file-pdf","aria-hidden":"true",viewBox:"64 64 896 896"},se=h(()=>s("path",{d:"M531.3 574.4l.3-1.4c5.8-23.9 13.1-53.7 7.4-80.7-3.8-21.3-19.5-29.6-32.9-30.2-15.8-.7-29.9 8.3-33.4 21.4-6.6 24-.7 56.8 10.1 98.6-13.6 32.4-35.3 79.5-51.2 107.5-29.6 15.3-69.3 38.9-75.2 68.7-1.2 5.5.2 12.5 3.5 18.8 3.7 7 9.6 12.4 16.5 15 3 1.1 6.6 2 10.8 2 17.6 0 46.1-14.2 84.1-79.4 5.8-1.9 11.8-3.9 17.6-5.9 27.2-9.2 55.4-18.8 80.9-23.1 28.2 15.1 60.3 24.8 82.1 24.8 21.6 0 30.1-12.8 33.3-20.5 5.6-13.5 2.9-30.5-6.2-39.6-13.2-13-45.3-16.4-95.3-10.2-24.6-15-40.7-35.4-52.4-65.8zM421.6 726.3c-13.9 20.2-24.4 30.3-30.1 34.7 6.7-12.3 19.8-25.3 30.1-34.7zm87.6-235.5c5.2 8.9 4.5 35.8.5 49.4-4.9-19.9-5.6-48.1-2.7-51.4.8.1 1.5.7 2.2 2zm-1.6 120.5c10.7 18.5 24.2 34.4 39.1 46.2-21.6 4.9-41.3 13-58.9 20.2-4.2 1.7-8.3 3.4-12.3 5 13.3-24.1 24.4-51.4 32.1-71.4zm155.6 65.5c.1.2.2.5-.4.9h-.2l-.2.3c-.8.5-9 5.3-44.3-8.6 40.6-1.9 45 7.3 45.1 7.4zm191.4-388.2L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"},null,-1)),ne=[se],ie={key:2,class:"u-file",focusable:"false","data-icon":"file","aria-hidden":"true",viewBox:"64 64 896 896"},ue=h(()=>s("path",{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:"#e6f7ff"},null,-1)),ce=h(()=>s("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z"},null,-1)),de=[ue,ce],re={class:"m-file-mask"},fe=["href"],pe=h(()=>s("svg",{class:"u-icon",focusable:"false","data-icon":"eye","aria-hidden":"true",viewBox:"64 64 896 896"},[s("path",{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"})],-1)),ve=[pe],he=["onClick"],me=h(()=>s("svg",{class:"u-icon",focusable:"false","data-icon":"delete","aria-hidden":"true",viewBox:"64 64 896 896"},[s("path",{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"})],-1)),ge=[me],_e=R({__name:"Upload",props:{accept:{default:"*"},multiple:{type:Boolean,default:!1},maxCount:{default:1},tip:{default:"Upload"},uploadingTip:{default:"Uploading"},fit:{default:"contain"},errorInfo:{default:""},beforeUpload:{type:Function,default:()=>!0},uploadMode:{default:"base64"},customRequest:{type:Function,default:()=>{}},disabled:{type:Boolean,default:!1},fileList:{default:()=>[]}},emits:["update:fileList","change","remove"],setup(u,{emit:r}){const n=u,o=m([]),d=m(1),v=m(Array(n.maxCount).fill(!1)),_=m();S(()=>{w()});function w(){o.value=[...n.fileList],o.value.length>n.maxCount&&o.value.splice(n.maxCount),n.disabled?d.value=o.value.length:o.value.length<n.maxCount?d.value=n.fileList.length+1:d.value=n.maxCount}function x(t){const e=/\.(jpg|jpeg|png|gif)$/i,a=/^data:image/;return e.test(t)||a.test(t)}function V(t){const e=/\.pdf$/i,a=/^data:application\/pdf/;return e.test(t)||a.test(t)}function H(t,e){var i;const a=(i=t.dataTransfer)==null?void 0:i.files;if(a!=null&&a.length){const l=a.length;for(let c=0;c<l&&e+c<=n.maxCount;c++)z(a[c],e+c);_.value[e].value=""}}function L(t){_.value[t].click()}function q(t,e){const a=t.target.files;if(a!=null&&a.length){const i=a.length;for(let l=0;l<i&&e+l<n.maxCount;l++)z(a[l],e+l);_.value[e].value=""}}const z=function(t,e){n.beforeUpload(t)?(n.maxCount>d.value&&d.value++,n.uploadMode==="base64"&&(v.value[e]=!0,B(t,e)),n.uploadMode==="custom"&&(v.value[e]=!0,D(t,e))):W(()=>{k(n.errorInfo)})};function B(t,e){var a=new FileReader;a.readAsDataURL(t),a.onloadstart=function(i){},a.onabort=function(i){},a.onerror=function(i){},a.onprogress=function(i){i.loaded===i.total&&(v.value[e]=!1)},a.onload=function(i){var l;o.value.push({name:t.name,url:(l=i.target)==null?void 0:l.result}),r("update:fileList",o.value),r("change",o.value)},a.onloadend=function(i){}}function D(t,e){n.customRequest(t).then(a=>{o.value.push(a),r("update:fileList",o.value),r("change",o.value)}).catch(a=>{n.maxCount>1&&(d.value=o.value.length+1),k(a)}).finally(()=>{v.value[e]=!1})}function F(t){o.value.length<n.maxCount&&d.value--;const e=o.value.splice(t,1);r("remove",e),r("update:fileList",o.value),r("change",o.value)}const y=m();function k(t){y.value.error(t)}return(t,e)=>{const a=U("Spin"),i=U("Message");return f(),p("div",O,[(f(!0),p($,null,T(d.value,l=>(f(),p("div",{class:"m-upload-item",key:l},[s("div",Q,[b(s("div",{class:j(["m-upload-wrap",{"upload-disabled":u.disabled}]),onDragenter:e[1]||(e[1]=g(()=>{},["stop","prevent"])),onDragover:e[2]||(e[2]=g(()=>{},["stop","prevent"])),onDrop:g(c=>u.disabled?()=>!1:H(c,l-1),["stop","prevent"]),onClick:c=>u.disabled?()=>!1:L(l-1)},[s("input",{ref_for:!0,ref_key:"uploadInput",ref:_,type:"file",onClick:e[0]||(e[0]=g(()=>{},["stop"])),accept:u.accept,multiple:u.multiple,onChange:c=>q(c,l-1),style:{display:"none"}},null,40,Y),s("div",null,[Z,s("p",ee,[N(t.$slots,"default",{},()=>[A(E(u.tip),1)],!0)])])],42,X),[[C,!v.value[l-1]&&!o.value[l-1]]]),b(s("div",ae,[M(a,{class:"u-spin",tip:u.uploadingTip,size:"small",indicator:"dynamic-circle"},null,8,["tip"])],512),[[C,v.value[l-1]]]),o.value[l-1]?(f(),p("div",te,[x(o.value[l-1].url)?(f(),p("img",{key:0,class:"u-image",style:J(`object-fit: ${u.fit};`),src:o.value[l-1].url,alt:o.value[l-1].name},null,12,le)):V(o.value[l-1].url)?(f(),p("svg",oe,ne)):(f(),p("svg",ie,de)),s("div",re,[s("a",{class:"m-icon",title:"\u9884\u89C8",href:o.value[l-1].url,target:"_blank"},ve,8,fe),b(s("a",{class:"m-icon",title:"\u5220\u9664",onClick:g(c=>F(l-1),["prevent","stop"])},ge,8,he),[[C,!u.disabled]])])])):P("",!0)])]))),128)),M(i,{ref_key:"message",ref:y,duration:3e3,top:30},null,512)])}}});var Ce=I(_e,[["__scopeId","data-v-70d3a9b7"],["__file","Upload.vue"]]);export{Ce as default};
